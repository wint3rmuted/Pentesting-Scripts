#!/bin/bash

rm ssh_ok no_ssh no_auth ssh_up other

while read ip host ; do

#   status=$(ssh -o BatchMode=yes -o ConnectTimeout=5 $ip echo ok 2>&1)

    status=$(ssh -o BatchMode=yes -o StrictHostKeyChecking=no -o ConnectTimeout=5 $ip echo ok 2>&1)
    case $status in
        ok) echo $ip $host >> ssh_ok ;;
	*"No route to host"*) echo $ip $host $status >> no_ssh ;;
        *"Permission denied"*) echo $ip $host $status >> no_auth ;;
	*"Host key verification failed"*) echo $ip $host $status >> ssh_up;;
        *) echo $ip $host $status >> other ;;
    esac

done < ip.list
