# A simple PowerShell script that lists all local users and their privileges on a machine and retrieves all users along with their privileges from the Active Directory domain.
# This script uses Get-WmiObject to retrieve local users and their privileges and Get-ADUser to retrieve users from the Active Directory domain along with their group memberships.

# List all local users and their privileges
$localUsers = Get-WmiObject -Class Win32_UserAccount | Where-Object { $_.Local -eq $true }

Write-Host "Local Users and Privileges:"
foreach ($user in $localUsers) {
    $userPrivileges = Get-WmiObject -Class Win32_UserAccount -Filter "Name='$($user.Name)'" | Select-Object -ExpandProperty Privileges
    Write-Host "$($user.Name) - Privileges: $($userPrivileges -join ', ')"
}

# List all users in the Active Directory domain along with their privileges
$domainUsers = Get-ADUser -Filter * -Properties SamAccountName, MemberOf

Write-Host "`nActive Directory Users and Privileges:"
foreach ($user in $domainUsers) {
    $userPrivileges = $user.MemberOf | Get-ADGroup | Select-Object -ExpandProperty Name
    Write-Host "$($user.SamAccountName) - Privileges: $($userPrivileges -join ', ')"
}
