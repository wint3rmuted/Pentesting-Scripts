# sudo ruby add_user.rb <username> <password>
# A Simple ruby script to add a user.

#!/usr/bin/env ruby

def add_user(username, password)
  # Check if the script is run with elevated privileges
  if Process.uid != 0
    puts "Please run the script with elevated privileges (sudo)."
    exit 1
  end

  # Use the system command to add a user
  system("adduser --disabled-password --gecos '' #{username}")

  # Set the user's password
  system("echo '#{username}:#{password}' | chpasswd")

  # Display a success message
  puts "User '#{username}' added successfully with the specified password."
end

# Get username and password from command line arguments
username = ARGV[0]
password = ARGV[1]

# Check if both username and password are provided
if username.nil? || password.nil?
  puts "Usage: ruby add_user.rb <username> <password>"
  exit 1
end

# Call the function to add the user
add_user(username, password)

